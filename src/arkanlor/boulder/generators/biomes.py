"""
    Biomes.
    
    generated by a noise for 8x8 you can have biomes controlling the macro
    layout of your world.
"""
import numpy
from arkanlor.misc.geology import Voronoi, MidpointDisplacementNoise
from arkanlor.boulder.generators.const import BLACKMAP

class Biome(object):
    """
        a biome represents, how this area 8x8 is populated.
    """
    def __init__(self, height=None):
        self.height = height or 0
    def apply_cell(self, mapblock, rx, ry, hf, tf):
        mapblock.tiles[rx, ry] = 0x0
        mapblock.heights[rx, ry] = 0

    def apply(self, mapblock, height_map=None, tile_map=None):
        if height_map is None:
            height_map = mapblock.height_map
        if tile_map is None:
            tile_map = mapblock.tile_map
        for rx in xrange(8):
            for ry in xrange(8):
                hf = height_map[rx, ry]
                if tile_map is not None:
                    # a tile map is optional
                    tf = tile_map[rx, ry]
                else:
                    tf = 0.0
                # normally we should do something with this information.
                # however, for benchmarking we just touch all variables.
                # we set ourselves to None.
                self.apply_cell(mapblock, rx, ry, hf, tf)

class Blackness(Biome):
    def apply_cell(self, mapblock, rx, ry, hf, tf):
        mapblock.tiles[rx, ry] = BLACKMAP # noname blackness.
        mapblock.heights[rx, ry] = 0
